<% @gem.by_name do |name, versions| %>
  <% latest_spec = spec_for(name, versions.newest.number) %>
  <div class="page-header">
    <h1>
      <%= name %>
      <small><%= latest_spec.summary %></small>
      <span class="label label-primary pull-right"><%= versions.newest.number %></span>
    </h1>
    <p class="lead"><%= latest_spec.description %></p>
  </div>

  <div class="panel-group" id="versions">
    <% versions.to_a.reverse_each do |version| %>
      <% spec = spec_for(version.name, version.number) %>
      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">
            <a data-toggle="collapse" data-parent="#versions" href="#version-<%= version.number %>">
              <strong><%= version.name %></strong> <%= version.number %>
              <span class="pull-right"><%= spec.date.to_date %></span>
            </a>
          </h4>
        </div>
        <div id="version-<%= version.number %>" class="panel-collapse collapse <%= version == versions.newest ? 'in' : '' %>">
          <div class="panel-body">
            <div class="row">
              <div class="col-md-6">
                <h4>Runtime Dependencies</h4>
                <ul class="list-unstyled">
                  <%= partial_collection(:gem_dependency, spec.runtime_dependencies) %>
                </ul>
              </div>
              <div class="col-md-6">
                <h4>Development Dependencies</h4>
                <ul class="list-unstyled">
                  <%= partial_collection(:gem_dependency, spec.development_dependencies) %>
                </ul>
              </div>
            </div>

            <a href="<%= url("/gems/#{version.gemfile_name}.gem") %>" class="btn btn-danger" data-confirm="Really?" data-method="delete">
              Delete
            </a>
          </div>
        </div>
      </div>
    <% end %>
  </div>
<% end %>
